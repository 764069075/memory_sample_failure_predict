# 赛题背景
小明同学在使用电脑上网课的时候突然电脑黑屏出现故障，导致自己网课没办法正常进行，小明突发奇想，对于电脑故障类问题，是否能提前预知，这样就可以在更加重要的时刻提前做应对。

无独有偶，在实际的商业生产中，无法预知的硬件故障，往往会给企业带来很大经济损失，如企业服务器在重大线上活动期间出现故障导致损失以及数据丢失等。

因此，我们尝试收集了一段时间内的内存系统日志、内存故障数据来尝试通过科学的方式来预测某块内存在未来一段时间是否会出现故障，输出预测未来7天会发生内存故障的机器集合，且附带预测时间间隔，选手们可以发挥想象提出自己的解决方案从赛题提供的数据中挖掘出和内存故障相关的特征，训练合适的模型预测内存故障。数据处理方法和算法模型不限，鼓励选手取得较好模型效果的同时考虑算法复杂度，以构建相对高效的方案。

注：系统日志是记录系统中硬件、软件和系统问题的信息，同时还可以监视系统中发生的事件。用户可以通过它来检查错误发生的原因，或者硬件状态等。

# 数据描述
数据中提供的24个日志模版可以理解为对系统日志长文本的进行了关键字提取，模版为这些关键字的组合，其中hwerr表示hardware error模块，sel表示sel模块，但我们对模版其他的关键字进行了脱敏。

|列名|实例|说明|
|--|--|--|
|collect_time|2019/1/14 18:19|日志发生时间|
|_hwerr_|1|脱敏后的hardware error模块|
|sel|1|脱敏后的sel模块|
|serial_number|server_31576|电脑编号|

# 提交说明
选手需要用自己训练好的模型在测试集上预测结果（未来7天是否出现故障）并将预测为会出现故障的机器和预测时间间隔(pti：时间间隔，以分钟为单位)保存为csv格式提交。

形式如下：

server_1,2019-08-15 00:00:00,14

server_123,2019-08-16 02:12:00,1200

server_456,2019-08-14: 06:23:59,720

如上述第一条的含义如下：
"{"serial_number":server_1, "predicting time":"2019-08-15 00:00:00", "pti":14}",表示该模型在时间2019-08-15 00:00:00预测server_1将在接下来的14分钟内（即在2019-08-15：00:14:00之前）发生内存故障。

注：
- 预测为正常机器的结果无需写到上传文件中。

  - 单个电脑可能存在多个预测结果，但在评估过程中只考虑每个机器最早一次预测为故障的时间

  - 例如

    - server_1分别在2019-08-15 00:00:00和2019-08-15 00:05:00两次被预测出未来7天内可能会发生故障，但在模型评估时只会选用2019-08-15 00:00:00的预测结果。

- 预测结果保存为csv文件格式，保存的csv文件无header，无index。
  - 第一列为serial_number
  - 第二列为预测时间（并非预测故障何时会发生的时间），格式为YYYY-MM-dd HH:mm:ss，字符串类型
  - 第三列为预测时间间隔（分钟为单位，int型）

# 解答过程
### 回归与分类
- 将7天内出错看作二分类问题
- 将出错时间看作回归问题
### 模型筛选
五重交叉验证
#### 分类模型
|排名|模型|(平均)召回率|
|--|--|--|
|1|XGBClassifier|0.074325|
|2|RandomForestClassifier|0.074300|
|3|ExtraTreesClassifier|0.074292|
|4|BaggingClassifier|0.074160|
|5|LGBMClassifier|0.074011|
|6|HistGradientBoostingClassifier|0.073772|
|7|GradientBoostingClassifier|0.068233|
|8|XGBRFClassifier|0.063213|
|9|AdaBoostClassifier|0.004963|
#### 回归模型
|排序|模型|r2得分|
|--|--|--|
|1|GradientBoostingRegressor|-0.029399|
|2|XGBRFRegressor|-0.044230|
|3|RandomForestRegressor|-0.056074|
|4|XGBRegressor|-0.056461|
|5|DecisionTreeRegressor|-0.056995|
|6|LGBMRegressor|-0.057034|
|7|AdaBoostRegressor|-0.081863|
|8|SVR|-0.190989|
分别选取效果最高的模型
### 优化调参
因为电脑性能不够，跳过
# 最终得分
13.8%
